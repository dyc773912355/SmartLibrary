<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="../../js/echarts.min.js"></script>
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="css/bigscreen.css" />
    <title></title>
</head>
<style type="text/css">
</style>
<script type="application/javascript">
    var page=1;
    var changediv=1;
    var croomtotal=0;
    var sycroon=0;
    var seattotal=0;
    var syseat=0;
    var ereadtotal=0;
    var syeread=0;
    function change(){
        if(page==1){
            page++;
            $("#main_charts").css("display","none");
            $("#tz").css("display","block");
        }
        else if(page==2){
            page--;
            $("#main_charts").css("display","block");
            $("#tz").css("display","none");
        }
    }
    function change1(){
        if(changediv==1){
            changediv++;
            $("#lend").css("display","block");
            $("#seat").css("display","none");
            $("#gctrl").css("display","none");
            $("#eread").css("display","none");
            $("#print").css("display","none");
            $("#croom").css("display","none");
        }
        else if(changediv==2){
            changediv++;
            $("#lend").css("display","none");
            $("#seat").css("display","block");
            $("#gctrl").css("display","none");
            $("#eread").css("display","none");
            $("#print").css("display","none");
            $("#croom").css("display","none");
        }
        else if(changediv==3){
            changediv++;
            $("#lend").css("display","none");
            $("#seat").css("display","none");
            $("#gctrl").css("display","block");
            $("#eread").css("display","none");
            $("#print").css("display","none");
            $("#croom").css("display","none");
        }
        else if(changediv==4){
            changediv++;
            $("#lend").css("display","none");
            $("#seat").css("display","none");
            $("#gctrl").css("display","none");
            $("#eread").css("display","block");
            $("#print").css("display","none");
            $("#croom").css("display","none");
        }
        else if(changediv==5){
            changediv++;
            $("#lend").css("display","none");
            $("#seat").css("display","none");
            $("#gctrl").css("display","none");
            $("#eread").css("display","none");
            $("#print").css("display","block");
            $("#croom").css("display","none");
        }
        else if(changediv==6){
            changediv=1;
            $("#lend").css("display","none");
            $("#seat").css("display","none");
            $("#gctrl").css("display","none");
            $("#eread").css("display","none");
            $("#print").css("display","none");
            $("#croom").css("display","block");
        }
    }
    function putnumber() {
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/number",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                $("#all_gctrl").text(data.all_gctrl);
                /*$("#seatnumber").text(data.all_seats-data.now_seats);
                $("#croomnumber").text(data.all_crooms-data.now_crooms);*/
                $("#all_lend").text(data.all_lend);
                $("#all_print").text(data.all_print);
                $("#all_book").text(data.all_book);
            }
        });
    }
    function puticpremonth() {
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/icpremonth",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("c"));
                var myChart_option={
                    title: {
                        text: 'IC空间',
                        x: 'center',
                        y: 'center',
                        textStyle: {
                            fontWeight: 'normal',
                            fontSize: 22,
                            color:'#00ccfe'
                        }
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: function(params, ticket, callback) {
                            var res = params.seriesName;
                            res += '<br/>' + params.name + ' : ' + params.percent + '%';
                            return res;
                        }
                    },
                    legend: {
                     orient: 'vertical',
                        x: 'left',
                        y:'center',
                        textStyle:{
                            color:'#00ccfe',
                        },
                     data: ['座位', '研修间', '电子阅览室'],
                     itemWidth: 20,
                     itemHeight: 10
                     },
                    series: [{
                        name: 'IC空间',
                        type: 'pie',
                        selectedMode: 'single',
                        radius: ['50%', '90%'],
                        label: {
                            normal: {
                                show:false,
                                position: 'inner',
                                textStyle: {
                                    color: '#fff',
                                    fontSize: 14
                                }
                            }
                        },
                        labelLine: {
                            normal: {
                                show: false
                            }
                        },
                        data: [{
                            value: data.premonth_seats,
                            name: '座位'
                        }, {
                            value: data.premonth_crooms,
                            name: '研修间'
                        }, {
                            value: data.premonth_ereads,
                            name: '电子阅览室'
                        }]
                    }],
                    color : ['#3db5f5','#db8776','#FF6A6A']
                };
                myChart.setOption(myChart_option);
            }
        });
    }
    function putprintpremonth(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/printpremonth",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("d"));
                var myChart_option = {
                    tooltip: {
                        trigger: 'item',
                        formatter: '{b}: {c} ({d}%)'
                    },
                    legend: {
                        show : true,
                        orient: 'vertical',
                        x: 'left',
                        y:'center',
                        textStyle:{
                            color:'#00ccfe',
                        },
                        data:['打印','复印','扫描']
                    },
                    series: [
                        {
                            name: '文印',
                            type: 'pie',
                            clockWise: true,
                            hoverAnimation: false,
                            radius: ['72%', '73%'],
                            label: {
                                normal: {
                                    position: 'center'
                                }
                            },
                            data: [{
                                value: 1,
                                label: {
                                    normal: {
                                        formatter: '文印',
                                        textStyle: {
                                            color: '#00ccfe',
                                            fontSize: 22
                                        }
                                    }
                                },
                                itemStyle: {
                                    normal: {
                                        color: '#00ccfe',
                                        borderColor: '#00ccfe',
                                        borderWidth: 2
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(0,0,0,0)',
                                    textStyle: {
                                        color: 'rgba(0,0,0,0)'
                                    }
                                }
                            }]
                        },
                        {
                            name:'文印',
                            type:'pie',
                            radius: ['78%', '90%'],
                            avoidLabelOverlap: false,
                            label: {
                                normal: {
                                    show:false,
                                    formatter : '{b} {d}%',
                                    textStyle: {
                                        fontSize: 22,
                                        color: '#00ccfe'
                                    }
                                },
                                emphasis: {
                                    show: false
                                }
                            },
                            labelLine: {
                                normal: {
                                    show:false,
                                    lineStyle: {
                                        color: '#00ccfe'
                                    }
                                }
                            },
                            data:[
                                {value:data.premonth_print_p, name:'打印'},
                                {value:data.premonth_print_c, name:'复印'},
                                {value:data.premonth_print_s, name:'扫描'},
                            ]
                        }
                    ],
                    color : ['#3db5f5','#db8776','#FF6A6A']
                };
                myChart.setOption(myChart_option);
            }
        });
    }
    function rating(chartid,rating){
        var number = rating * 266 / 360;
        var number_ = 100-number;
        rating = rating.toString();
        var myChart = echarts.init(document.getElementById(chartid));
        var myChart_option = {
            title: {
                show:false,
                "text": 'PUE',
                "x": '50%',
                "y": '80%',
                "textAlign": "center",
                "textStyle": {
                    "fontWeight": 'normal',
                    "fontSize": 24,
                    "color": "#bcbfff",
                },
                // "subtextStyle": {
                //     "fontWeight": 'bold',
                //     "fontSize": 32,
                //     "color": '#3ea1ff'
                // }
            },
            series: [{
                "name": ' ',
                "type": 'pie',
                "radius": ['98%', '100%'],
                "avoidLabelOverlap": false,
                "startAngle": 225,
                "color": ["#fff", "transparent"],
                "hoverAnimation": false,
                "legendHoverLink": false,
                "label": {
                    "normal": {
                        "show": false,
                        "position": 'center'
                    },
                    "emphasis": {
                        "show": true,
                        "textStyle": {
                            "fontSize": '30',
                            "fontWeight": 'bold'
                        }
                    }
                },
                "labelLine": {
                    "normal": {
                        "show": false
                    }
                },
                "data": [{
                    "value": 75,
                    "name": '',
                    "itemStyle": {
                        "normal": {
                            "color": new echarts.graphic.LinearGradient(1, 0, 0, 1, [{
                                "offset": 0,
                                "color": '#f125ff'
                            }, {
                                "offset": 1,
                                "color": '#2dcbff'
                            }]),
                        }
                    }
                }, {
                    "value": 25,
                    "name": '',
                    "itemStyle": {
                        "normal": {
                            color: 'rgba(0,0,0,0)'
                        }
                    }
                }]
            }, {
                "name": '',
                "type": 'pie',
                "radius": ['80%', '98.1%'],
                "avoidLabelOverlap": false,
                "startAngle": 225,
                "color": ["#fff", "transparent"],
                "hoverAnimation": false,
                "legendHoverLink": false,
                "z": 10,
                "label": {
                    "normal": {
                        "show": false,
                        "position": 'center'
                    },
                    "emphasis": {
                        "show": true,
                        "textStyle": {
                            "fontSize": '30',
                            "fontWeight": 'bold'
                        }
                    }
                },
                "labelLine": {
                    "normal": {
                        "show": false
                    }
                },
                "data": [{
                    "name": rating,
                    "value": number,
                    "label": {
                        "normal": {
                            "show": true,
                            "formatter": '{b} %',
                            "textStyle": {
                                "fontSize": 28,
                                "fontWeight": "bold",
                                "color": "#5886f0",
                            },
                            "position": "center"
                        }
                    },
                    "itemStyle": {
                        "normal": {
                            "color": new echarts.graphic.LinearGradient(1, 0, 0, 1, [{
                                "offset": 0,
                                "color": '#f125ff'
                            }, {
                                "offset": 1,
                                "color": '#2dcbff'
                            }]),
                        }
                    }
                }, {
                    "name": '',
                    "value": number_,
                    "itemStyle": {
                        "normal": {
                            color: 'rgba(0,0,0,0)'
                        }
                    }
                }]
            }

            ]
        };
        myChart.setOption(myChart_option);
    }
    function putrating(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/rating",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var seatrating=parseInt(parseInt(data.now_seats)/parseInt(data.all_seats)*100);
                var croomrating=parseInt(parseInt(data.now_crooms)/parseInt(data.all_crooms)*100);
                var ereadrating=parseInt(parseInt(data.now_ereads)/parseInt(data.all_ereads)*100);
                rating("f",seatrating);
                rating("g",croomrating);
                rating("h",ereadrating);
            }
        });
    }
    function putlend(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/lend",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var lend = data.lend;
                var lenddata = [];
                for(var i=0;i<24;i++){
                    lenddata.push({name:i+'~'+(i+1),value:lend[i]});
                }
                var myChart = echarts.init(document.getElementById("a"));
                var myChart_option={
                    tooltip: {
                        trigger: 'item',
                        position: ['48.5%', '49.2%'],
                        backgroundColor: 'rgba(50,50,50,0)',
                        textStyle : {
                            color: 'yellow',
                            fontWeight: 'bold'
                        },
                        formatter: "{d}%"
                    },
                    series : [
                        {
                            name: '上网时间',
                            type: 'pie',
                            radius : ['5%', '85%'],
                            roseType: 'area',
                            color:['#3fa7dc'],
                            data:lenddata,
                            labelLine: {
                                normal: {
                                    show: false
                                }
                            },
                            label: {
                                normal: {
                                    show: false
                                }
                            },
                            itemStyle: {
                                normal: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                },
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        {
                            name: '',
                            type: 'gauge',
                            min: 0,
                            max: 24,
                            startAngle: 90,
                            endAngle: 449.9,
                            radius: '97%',
                            splitNumber: 24,
                            clockwise: false,
                            animation: false,
                            detail: {
                                formatter: '{value}',
                                textStyle: {
                                    color: '#63869e'
                                }
                            },
                            detail:{
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            axisLine: {
                                lineStyle: {
                                    color: [
                                        [0.25, '#63869e'],
                                        [0.75, '#ffffff'],
                                        [1, '#63869e']
                                    ],
                                    width: '40%',
                                    shadowColor: '#0d4b81', //默认透明
                                    shadowBlur: 40,
                                    opacity: 1
                                }
                            },
                            splitLine: {
                                length: 5,
                                lineStyle: {
                                    color: '#ffffff',
                                    width: 2
                                }
                            },
                            axisLabel: {
                                formatter: function(v){
                                    return v?v:'';
                                },
                                textStyle: {
                                    color: "red",
                                    fontWeight: 700
                                }
                            },
                            itemStyle: {
                                normal: {
                                    color: 'green',
                                    width: 2
                                }
                            }
                        },
                        {
                            name: '',
                            type: 'gauge',
                            min: 0,
                            max: 24,
                            startAngle: 90,
                            endAngle: 449.9,
                            radius: '87%',
                            splitNumber: 24,
                            clockwise: false,
                            animation: false,
                            detail: {
                                formatter: '{value}',
                                textStyle: {
                                    color: '#63869e'
                                }
                            },
                            detail:{
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            axisLine: {
                                lineStyle: {
                                    color: [
                                        [1, '#E8E8E8']
                                    ],
                                    width: '10%',
                                    opacity:0.8
                                }
                            },
                            splitLine: {
                                show:true,
                                length: '100%',
                                lineStyle: {
                                    color: 'grey',
                                    width: '1'
                                }
                            },
                            axisLabel: {
                                show:false,
                                formatter: function(v){
                                    return v?v:'';
                                },
                                textStyle: {
                                    color: "#fb5310",
                                    fontWeight: 700
                                }
                            },
                            itemStyle: {
                                normal: {
                                    color: 'green',
                                    width: 2,
                                    borderWidth: 3,
                                }
                            }
                        }
                    ]
                };
                myChart.setOption(myChart_option);
            }
        });
    }
    function putresource(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/resource",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("lend"));
                var myChart1 = echarts.init(document.getElementById("seat"));
                var myChart2 = echarts.init(document.getElementById("gctrl"));
                var myChart3 = echarts.init(document.getElementById("eread"));
                var myChart4 = echarts.init(document.getElementById("print"));
                var myChart5 = echarts.init(document.getElementById("croom"));
                var myChart_option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: [ '借阅'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '借阅',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(0, 136, 212, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(0, 136, 212, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: 'rgb(0,136,212)',
                                borderColor: 'rgba(0,136,212,0.2)',
                                borderWidth: 12

                            }
                        },
                        data: data.lend
                    }]
                }
                var myChart_option1 = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: ['座位'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '座位',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(255, 106, 106, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(255, 106, 106, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {

                                color: 'rgb(255,106,106)',
                                borderColor: 'rgba(255,106,106,0.2)',
                                borderWidth: 12
                            }
                        },
                        data: data.seats
                    } ]
                }
                var myChart_option2 = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: ['进馆人数'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '进馆人数',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(137, 189, 27, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(137, 189, 27, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: 'rgb(137,189,27)',
                                borderColor: 'rgba(137,189,2,0.27)',
                                borderWidth: 12

                            }
                        },
                        data: data.gctrl
                    } ]
                }
                var myChart_option3 = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: ['电子阅览室'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '电子阅览室',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(0, 206, 209, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(0, 206, 209, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {

                                color: 'rgb(0,206,209)',
                                borderColor: 'rgba(0,206,209,0.2)',
                                borderWidth: 12
                            }
                        },
                        data: data.ereads
                    }, ]
                }
                var myChart_option4 = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: ['打印'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '打印',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(219, 50, 51, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(219, 50, 51, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {

                                color: 'rgb(219,50,51)',
                                borderColor: 'rgba(219,50,51,0.2)',
                                borderWidth: 12
                            }
                        },
                        data: data.print
                    }]
                }
                var myChart_option5 = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    },
                    legend: {
                        icon: 'roundRect',
                        itemGap: 13,
                        data: ['研修间'],
                        textStyle: {
                            fontSize: 12,
                            color: '#FFFFFF'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        name:'时',
                        boundaryGap: false,
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        data: data.hour
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '人次',
                        axisTick: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        },
                        axisLabel: {
                            margin: 10,
                            textStyle: {
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show:false,
                            lineStyle: {
                                color: '#FFFFFF'
                            }
                        }
                    }],
                    series: [{
                        name: '研修间',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 5,
                        showSymbol: false,
                        lineStyle: {
                            normal: {
                                width: 3
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(255, 130, 71, 0.8)'
                                }, {
                                    offset: 0.8,
                                    color: 'rgba(255, 130, 71, 0.2)'
                                }], false),
                                shadowColor: 'rgba(0, 0, 0, 0.1)',
                                shadowBlur: 10
                            }
                        },
                        itemStyle: {
                            normal: {

                                color: 'rgb(255,130,71)',
                                borderColor: 'rgba(255,130,71,0.2)',
                                borderWidth: 12
                            }
                        },
                        data: data.crooms
                    } ]
                }
                myChart.setOption(myChart_option);
                myChart1.setOption(myChart_option1);
                myChart2.setOption(myChart_option2);
                myChart3.setOption(myChart_option3);
                myChart4.setOption(myChart_option4);
                myChart5.setOption(myChart_option5);
            }
        });
    }
    function putgctrl(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/gctrl",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("b"));
                var myChart_option={
                    grid: {
                        left: 0,
                        right: 0,
                        top:'10%',
                        bottom:'0',
                        containLabel: true
                    },
                    xAxis: {
                        show:false,
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },
                    yAxis: {
                        type: 'category',
                        axisLine: {
                            lineStyle: {
                                color: '#00ccfe'
                            }
                        },
                        data: data.academy
                    },
                    series: [{
                        name: '',
                        type: 'bar',
                        barGap: 0,
                        silent: true,
                        stack: 1,
                        data: data.all_times,
                        itemStyle: {
                            normal: {
                                barBorderRadius: [0, 5, 5, 0],
                                color:'#db8776'
                            },
                        },
                        label: {
                            normal: {
                                show: true,
                                position: 'insideRight'
                            }
                        }
                    }]
                };
                myChart.setOption(myChart_option);
            }
        });
    }
    function putlend_academy(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/lend_academy",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var optiondata=[];
                var myChart = echarts.init(document.getElementById("tt"));
                for(var i=0;i<data.ymdate.length;i++){
                    var other=new Array;
                    var teacher=new Array;
                    var student=new Array;
                    var graduate=new Array;
                    for(var j=0;j<data.academy.length;j++){
                        other.push(data.other[data.academy.length*i+j]);
                        teacher.push(data.teacher[data.academy.length*i+j]);
                        student.push(data.student[data.academy.length*i+j]);
                        graduate.push(data.graduate[data.academy.length*i+j]);
                    }
                    optiondata.push({
                        'series':[{
                            name:'本科生',
                            type:'bar',
                            data:student
                        },{
                            name:'研究生',
                            type:'bar',
                            data:graduate
                        },{
                            name:'老师',
                            type:'bar',
                            data:teacher
                        },{
                                name:'其他',
                                type:'bar',
                                data:other
                            }
                        ]
                    });
                }
                var myChart_option = {
                    baseOption:{
                        timeline: {
                            left:'10%',
                            right:'10%',
                            data:data.ymdate,
                            axisType: 'category',
                            show: true,
                            autoPlay: true,
                            label: {
                                normal: {
                                    textStyle: {
                                        color: '#00ccfe',
                                        fontSize: 15
                                    }
                                }
                            },
                            controlStyle:{
                                show:false,
                            },
                            lineStyle:{
                                color:'#00ccfe',
                            },
                            playInterval: 1000
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                            }
                        },
                        legend: {
                            data: ['本科生', '研究生', '老师','其他'],
                            align: 'right',
                            textStyle:{
                                color:'#00ccfe',
                            },
                            right:10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '35%',
                            top:'15%',
                            containLabel: true
                        },
                        xAxis: [{
                            type: 'category',
                            splitLine:{
                                show:false
                            },
                            'axisLabel': {
                                rotate: 20,
                                'interval': 0
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#00ccfe'
                                }
                            },
                            data: data.academy
                        }],
                        yAxis: [{
                            type: 'value',
                            name:'人次',
                            splitLine:{
                                show:false
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#00ccfe'
                                }
                            },
                            /*axisLabel: {
                                formatter: '{value}'
                            }*/
                        }],
                    },
                    options:optiondata,
                };
                myChart_option.options=optiondata;
                myChart.setOption(myChart_option);
            }

        });
    }
    function putgctrl_academy(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/gctrl_academy",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var optiondata=[];
                var myChart = echarts.init(document.getElementById("l"));
                for(var i=0;i<data.ymdate.length;i++){
                    var f_times=new Array;
                    var m_times=new Array;
                    for(var j=0;j<data.academy.length;j++){
                        f_times.push(data.f_times[data.academy.length*i+j]);
                        m_times.push(data.m_times[data.academy.length*i+j]);
                    }
                    optiondata.push({
                        'series':[{
                            name:'男',
                            type:'bar',
                            data:m_times
                        },{
                            name:'女',
                            type:'bar',
                            data:f_times
                        }
                        ]
                    });
                }
                var myChart_option = {
                    baseOption:{
                        timeline: {
                            left:'10%',
                            right:'10%',
                            data:data.ymdate,
                            axisType: 'category',
                            show: true,
                            autoPlay: true,
                            label: {
                                normal: {
                                    textStyle: {
                                        color: '#00ccfe',
                                        fontSize: 15
                                    }
                                }
                            },
                            controlStyle:{
                                show:false,
                            },
                            lineStyle:{
                                color:'#00ccfe',
                            },
                            playInterval: 1000
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                            }
                        },
                        legend: {
                            data: ['男', '女'],
                            align: 'right',
                            textStyle:{
                                color:'#00ccfe',
                            },
                            right:10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '35%',
                            top:'15%',
                            containLabel: true
                        },
                        xAxis: [{
                            type: 'category',
                            splitLine:{
                                show:false
                            },
                            'axisLabel': {
                                rotate: 20,
                                'interval': 0
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#00ccfe'
                                }
                            },
                            data: data.academy
                        }],
                        yAxis: [{
                            type: 'value',
                            name:'人次',
                            splitLine:{
                                show:false
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#00ccfe'
                                }
                            },
                            /*axisLabel: {
                             formatter: '{value}'
                             }*/
                        }],
                    },
                    options:optiondata,
                };
                myChart_option.options=optiondata;
                myChart.setOption(myChart_option);
            }

        });
    }
    function putlend_academy_new(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/lend_academy_new",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("tt"));
                var myChart_option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: { // 坐标轴指示器，坐标轴触发有效
                            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                        }
                    },
                    legend: {
                        data: ['本科生', '研究生', '教师', '其他'],
                        align: 'right',
                        textStyle:{
                            color:'#00ccfe',
                        },
                        right: 10
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        top: '5%',
                        bottom:'20%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        splitLine:{
                            show:false
                        },
                        'axisLabel': {
                            rotate: 20,
                            'interval': 0
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ccfe'
                            }
                        },
                        data: data.academy
                    }],
                    yAxis: [{
                        type: 'value',
                        name:'人次',
                        splitLine:{
                            show:false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ccfe'
                            }
                        },
                        /*axisLabel: {
                         formatter: '{value}'
                         }*/
                    }],
                    series: [{
                        name: '本科生',
                        type: 'bar',
                        data: data.student
                    }, {
                        name: '研究生',
                        type: 'bar',
                        data: data.graduate
                    }, {
                        name: '教师',
                        type: 'bar',
                        data: data.teacher
                    }, {
                        name: '其他',
                        type: 'bar',
                        data: data.other
                    }]

                };
                myChart.setOption(myChart_option);
            }

        });
    }
    function putgctrl_academy_new(){
        $.ajax({
            type:"get",
            contentType: 'application/json',
            url:"../../bigscreen/gctrl_academy_new",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var myChart = echarts.init(document.getElementById("l"));
                var myChart_option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: { // 坐标轴指示器，坐标轴触发有效
                            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                        }
                    },
                    legend: {
                        data: ['男', '女'],
                        align: 'right',
                        textStyle:{
                            color:'#00ccfe',
                        },
                        right: 10
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        top: '5%',
                        bottom:'20%',
                        containLabel: true
                    },
                    xAxis: [{
                        type: 'category',
                        splitLine:{
                            show:false
                        },
                        'axisLabel': {
                            rotate: 20,
                            'interval': 0
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ccfe'
                            }
                        },
                        data: data.academy
                    }],
                    yAxis: [{
                        type: 'value',
                        name:'人次',
                        splitLine:{
                            show:false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ccfe'
                            }
                        },
                        /*axisLabel: {
                         formatter: '{value}'
                         }*/
                    }],
                    series: [{
                        name: '男',
                        type: 'bar',
                        data: data.m_times
                    }, {
                        name: '女',
                        type: 'bar',
                        data: data.f_times
                    }]

                };
                myChart.setOption(myChart_option);
            }

        });
    }
    function putdata_sysfxx(){
        $.ajax({
            type:"get",
            url:"../../bigscreen/sysfxx",
            async:false,
            dataType: 'json',
            success: function(data, textStatus, jqXHR){
                var seatrating=0;
                var croomrating=0;
                var ereadrating=0;
                if(parseInt(data.uSeatTotal)!=0){
                    seatrating = parseInt(parseInt(data.uSeatTotal-data.uSeatIdel)/parseInt(data.uSeatTotal)*100);
                }
                if(parseInt(data.uRoomTotal)!=0){
                    croomrating = parseInt(parseInt(data.uRoomTotal-data.uRoomIdle)/parseInt(data.uRoomTotal)*100);
                }
                if(parseInt(data.uPCTotal)!=0){
                    ereadrating = parseInt(parseInt(data.uPCTotal-data.uPCIdel)/parseInt(data.uPCTotal)*100);
                }
                $("#seatnumber").text(data.uSeatIdel);
                $("#croomnumber").text(data.uRoomIdle);
                rating("f",seatrating);
                rating("g",croomrating);
                rating("h",ereadrating);
            }
        });
    }
    $(function(){
        putnumber();
        puticpremonth();
        putprintpremonth();
        /*putrating();*/
        putlend();
        putresource();
        putgctrl();
        putlend_academy_new();
        putgctrl_academy_new();
        putdata_sysfxx();
        /*var a = "↑10%";
        var b = "↓10%";
        var c = "持平";
        var green = "#006000";
        var red = "#CE0000";
        var isGrow = [1, 0, 2, 1, 0, 1, 1];
        var myChart1 = echarts.init(document.getElementById("b"));
        var myChart_option5={
            /!*legend: {
             orient: 'horizontal',
             right: 0,
             bottom: 0,
             selectedMode: false,
             itemGap: 10,
             itemWidth: 12,
             itemHeight: 12,
             data: ['民警', '辅警']
             },*!/
            grid: {
                left: 0,
                right: 0,
                top: 0,
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                show:false,
                type: 'value',
                boundaryGap: [0, 0.01]
            },
            yAxis: {
                type: 'category',
                data: ['NO.10', 'NO.9', 'NO.8', 'NO.7', 'NO.6', 'NO.5', 'NO.4', 'NO.3', 'NO.2', 'NO.1']
            },
            series: [{
                name: '民警',
                type: 'bar',
                barGap: 0,
                silent: true,
                stack: 1,
                data: [80, 90, 120, 150, 180, 250, 280, 330, 380, 450],
                itemStyle: {
                    normal: {
                        barBorderRadius: [0, 5, 5, 0]
                    }
                },
                label: {
                    normal: {
                        show: true,
                        position: 'insideRight'
                    }
                }
            }, {
                name: '辅警',
                type: 'bar',
                barGap: 0,
                silent: true,
                stack: 2,
                data: [60, 70, 100, 130, 160, 230, 260, 310, 360, 430],
                itemStyle: {
                    normal: {
                        barBorderRadius: [0, 5, 5, 0]
                    }
                },
                label: {
                    normal: {
                        show: true,
                        position: 'insideRight'
                    }
                }
            }, {
                name: '民警',
                type: 'bar',
                barGap: 0,
                stack: 2,
                silent: true,
                data: [0, 0, 0, 0, 0, 0, 0],
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: function(params) {
                            if (isGrow[params.dataIndex] == 1) {
                                return '    ' + a;
                            } else {
                                return '';
                            }
                        },
                        textStyle: {
                            fontWeight: 'bolder',
                            color: red
                        }
                    }
                }
            }, {
                name: '民警',
                type: 'bar',
                barGap: 0,
                stack: 2,
                silent: true,
                data: [0, 0, 0, 0, 0, 0, 0],
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: function(params) {
                            if (isGrow[params.dataIndex] == 0) {
                                return "    " + b;
                            } else {
                                return '';
                            }
                        },
                        textStyle: {
                            fontWeight: 'bolder',
                            color: green
                        }
                    }
                }
            }, {
                name: '民警',
                type: 'bar',
                barGap: 0,
                stack: 2,
                silent: true,
                data: [0, 0, 0, 0, 0, 0, 0],
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: function(params) {
                            if (isGrow[params.dataIndex] == 2) {
                                return "    " + c;
                            } else {
                                return '';
                            }
                        },
                        textStyle: {
                            fontWeight: 'bolder',
                            color: green
                        }
                    }
                }
            }]
        };
        myChart1.setOption(myChart_option5);*/
    });
    window.setInterval(putnumber,60000);
    window.setInterval(putdata_sysfxx,60000);
    /*window.setInterval(change,60000);*/
    window.setInterval(change1,3000);
</script>
<body background="img/back.png">
<div id="slide" style="height: 100%;width:100%;overflow: hidden">
    <div style="height: 100%;width: 100%;" id="main_charts">
        <div class="title">智 慧 图 书 馆</div>
        <div class="top_div">
            <div class="top_div_number">
                <p class="top_div_number_first">累计进馆人次</p>
                <p class="top_div_number_last" id="all_gctrl">0</p>
            </div>
            <div class="top_div_number">
                <p class="top_div_number_first">剩余座位数</p>
                <p class="top_div_number_last" id="seatnumber">0</p>
            </div>
            <div class="top_div_number">
                <p class="top_div_number_first">剩余研修间数量</p>
                <p class="top_div_number_last" id="croomnumber">0</p>
            </div>
            <div class="top_div_number">
                <p class="top_div_number_first">累计借阅次数</p>
                <p class="top_div_number_last" id="all_lend">0</p>
            </div>
            <div class="top_div_number">
                <p class="top_div_number_first">累计打印次数</p>
                <p class="top_div_number_last" id="all_print">0</p>
            </div>
            <div class="top_div_number">
                <p class="top_div_number_first">图书馆藏书数量</p>
                <p class="top_div_number_last" id="all_book">0</p>
            </div>
        </div>
        <div class="middle_div">
            <div class="middle_div_left">
                <div class="lend_yesterday">
                    <div class="div_title half">昨日借阅分析</div>
                    <div class="chart_div">
                        <div id="a" class="chart"></div>
                    </div>

                </div>
                <div class="lend_yesterday">
                    <div class="div_title half">本月进馆排名</div>
                    <div class="chart_div">
                        <div id="b" class="chart"></div>
                    </div>
                </div>
            </div>
            <div class="middle_div_middle">
                <div class="div_title">昨日图书馆资源使用分析</div>
                <div class="chart_div" style="height: 90%; overflow: hidden" id="sliders">
                    <div id="lend" class="chart"></div>
                    <div id="seat" class="chart"></div>
                    <div id="gctrl" class="chart"></div>
                    <div id="eread" class="chart"></div>
                    <div id="print" class="chart"></div>
                    <div id="croom" class="chart"></div>
                </div>
            </div>
            <div class="middle_div_left">
                <div class="lend_yesterday">
                    <div class="div_title half">本月IC空间使用分析</div>
                    <div class="chart_div">
                        <div id="c" class="chart"></div>
                    </div>
                </div>
                <div class="lend_yesterday">
                    <div class="div_title half">本月打印使用分析</div>
                    <div class="chart_div">
                        <div id="d" class="chart"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom_div">
            <div style="height: 100%;width: 33%;float: left;margin-right: 1%;">
                <div class="div_title half" style="line-height: 5vh">昨日借阅人次TOP5学院-身份</div>
                <div class="chart_div">
                    <div id="tt" class="chart"></div>
                </div>
            </div>
            <div class="rating_div">
                <div class="div_title half" style="line-height: 5vh">当前座位使用率</div>
                <div class="chart_div">
                    <div id="f" class="chart"></div>
                </div>
            </div>
            <div class="rating_div">
                <div class="div_title half" style="line-height: 5vh">当前电子阅览室使用率</div>
                <div class="chart_div">
                    <div id="g" class="chart"></div>
                </div>
            </div>
            <div class="rating_div">
                <div class="div_title half" style="line-height: 5vh">当前研修间使用率</div>
                <div class="chart_div">
                    <div id="h" class="chart"></div>
                </div>
            </div>
            <div style="height: 100%;width: 33%;float: left;">
                <div class="div_title half" style="line-height: 5vh">昨日闸机进馆人次TOP5学院-性别 </div>
                <div class="chart_div">
                    <div id="l" class="chart"></div>
                </div>
            </div>
        </div>
    </div>
    <div style="height: 100%;width: 100%" id="tz">
        <div class="title" >智 慧 图 书 馆</div>
        <div style="height: 94%;width: 100%;">
            <div id="tz_title" class="tz_title">
                <h1 class="tz_title_content">沈阳师范大学测试</h1>
            </div>
            <div id="tz_content" class="tz_content">
                <p id="tz_content_content" class="tz_content_content">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试沈阳师范大学测试</p>
            </div>
        </div>
    </div>
</div>

</body>
</html>
